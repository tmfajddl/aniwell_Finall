<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Aniwell Dashboard</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" th:href="@{/resource/css/common.css}">
	<link rel="stylesheet" th:href="@{/resource/css/petPage.css}">
	<link rel="stylesheet" th:href="@{/resource/css/petlist.css}">
	<!-- ğŸŸ¦ HEADì— ì¶”ê°€ -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
	<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
	<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
	<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

</head>

<body class="bg-gradient-to-b from-[#e4f0b9] to-[#fcdca9] font-sans">
	<script th:src="@{/resource/js/card-list.js}"></script>
	<!-- ğŸ”» BODY ëì— ì¶”ê°€ -->
	<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

	<div class="flex h-screen">
		<!-- Sidebar -->
		<div th:replace="common :: siteHeader"></div>

		<!-- Main content -->
		<main class="main_page min-h-screen flex-1 p-6 grid grid-rows-5 gap-4">

			<div class="row-span-2">
				<div class="h-[250px]" id="root"></div>
				<div class="line mx-auto text-center">
					<div class="mb-2">
						ë“±ë¡í•˜ê¸°
					</div>
				</div>
			</div>
			<div class="privat_page row-span-3 grid grid-cols-5 gap-4 w-4/5 p-3 mx-auto">

				<!-- ì™¼ìª½ ì‚¬ì´ë“œë°” (2ì—´) -->
				<aside class="col-span-1 rounded-xl content-center">
					<!-- ì‚¬ì´ë“œë°” ë©”ë‰´ ë“± -->
					<ul class="space-y-2 flex flex-col">
						<li><button class="w-full text-left shadow p-1">ë‚˜ì˜ ì •ë³´</button></li>
						<li><button class="w-full text-left shadow p-1">ë‚˜ì˜ í¬ë£¨</button></li>
					</ul>
				</aside>

				<!-- ì˜¤ë¥¸ìª½ ì½˜í…ì¸  ì˜ì—­ (3ì—´) -->
				<section class="col-span-4 bg-white p-4 rounded-xl shadow">
					<!-- ë™ì ìœ¼ë¡œ ë°”ë€ŒëŠ” ì½˜í…ì¸  ì˜ì—­ -->
					<div id="contentArea">
						<iframe src="http://localhost:3001/mypage/my-page" width="100%" height="600" frameborder="0"></iframe>
					</div>
				</section>
			</div>
		</main>






		<script type="text/babel">

			// âœ… 1. ë°˜ë ¤ë™ë¬¼ ë°ì´í„° ë°°ì—´ // ìš”ì²­ë„£ì–´ì„œ ê°’ ë°›ì•„ì˜¤ê¸° (memberIdë¡œ ê²€ìƒ‰í•´ì„œ ê°€ì§€ê³ ì˜¨ pet ë°°)))
			const pets = [
				{
					id: 1,
					name: "ë–¡ê±¸ë£©",
					breed: "ì½”ë¦¬ì•ˆìˆí—¤ì–´",
					gender: "ì•”ì»·",
					species: "ê²ì´ ë§ê³  ë†’ì€ ë°ë¥¼ ì•„ì£¼ ì¢‹ì•„í•´ìš”",
					birthDate: "2020.01.01",
					imageUrl: "https://i.imgur.com/vTaaRnh.png",
					createdAt: "2025.07.05",
				},
				{
					id: 2,
					name: "ë§ë˜",
					breed: "í‘¸ë“¤",
					gender: "ìˆ˜ì»·",
					species: "ì‚¬ëŒì„ ì¢‹ì•„í•´ìš”",
					birthDate: "2019.10.20",
					imageUrl: "https://i.imgur.com/vTaaRnh.png",
					createdAt: "2025.07.05",
				},
				{
					id: 3,
					name: "ë§ë˜",
					breed: "í‘¸ë“¤",
					gender: "ìˆ˜ì»·",
					species: "ì‚¬ëŒì„ ì¢‹ì•„í•´ìš”",
					birthDate: "2019.10.20",
					imageUrl: "https://i.imgur.com/vTaaRnh.png",
					createdAt: "2025.07.05",
				},
			];

			// âœ… 2. PetCard ì»´í¬ë„ŒíŠ¸ ì •ì˜
			function PetCard({pet}) {
				return (
					<div className="ani-card bg-white aspect-[1/1.6] w-[400px] rounded-xl p-6 shadow">
						<h2 className="text-2xl font-bold flex items-center gap-1 mb-4 justify-center">
							<span className="text-3xl">ğŸ¾</span> ë°˜ë ¤ë™ë¬¼ë“±ë¡ì¦
						</h2>

						<div className="grid grid-cols-3">
							<div>
								<div className="space-y-1 text-sm">
									<div><span className="font-semibold mr-2">ì´ë¦„:</span> {pet.name}</div>
									<div><span className="font-semibold mr-2">ë“±ë¡ë²ˆí˜¸:</span> {pet.id}</div>
									<div><span className="font-semibold mr-2">í’ˆì¢…:</span> {pet.breed}</div>
									<div><span className="font-semibold mr-2">ì„±ë³„:</span> {pet.gender}</div>
								</div>
							</div>

							<div className="space-y-1 text-sm">
								<div><span className="font-semibold mr-2">ìƒì¼:</span> {pet.birthDate}</div>
								<div><span className="font-semibold mr-2">ì¤‘ì„±í™”:</span> ì™„ë£Œ</div>
							</div>

							<div className="flex justify-center items-start">
								<img
									src={pet.imageUrl}
									alt="cat"
									className="w-[100px] h-[100px] object-cover rounded-xl border"
								/>
							</div>
						</div>
						<div className="text-sm ">
							<span className="font-semibold mr-2">íŠ¹ì§•:</span> {pet.species}
						</div>

						<div className="createdAt text-right text-xs text-gray-500 mt-2">{pet.createdAt}</div>
					</div>
				);
			}

			function App() {
				React.useEffect(() => {
					const swiper = new Swiper('.mySwiper', {
						centeredSlides: true,
						slidesPerView: 'auto', // âœ… 'auto'ë¡œ ë³€ê²½
						spaceBetween: -200,
						loop: false,
						grabCursor: true,
						on: {
							slideChangeTransitionEnd() {
								const allSlides = document.querySelectorAll('.swiper-slide');
								const activeIndex = swiper.activeIndex;

								// ğŸ” ì •í™•íˆ Â±2 ì´ìƒ ê±°ë¦¬ë§Œ íë¦¬ê²Œ ì²˜ë¦¬ (Â±1ì€ Swiperì—ê²Œ ë§¡ê¹€)
								const distantIndices = [];
								for (let i = 0; i < allSlides.length; i++) {
									if (Math.abs(i - activeIndex) >= 2) {
										distantIndices.push(i);
									}
								}

								// 1. ì œê±°
								allSlides.forEach((slide, idx) => {
									if (!distantIndices.includes(idx)) {
										if (slide.classList.contains('is-distant')) {
											slide.classList.remove('is-distant');
											slide.classList.add('is-distant-leaving');

											setTimeout(() => {
												slide.classList.remove('is-distant-leaving');
											}, 500);
										}
									}
								});

								// 2. ì¶”ê°€
								requestAnimationFrame(() => {
									distantIndices.forEach(index => {
										const slide = swiper.slides[index];
										if (slide) {
											slide.classList.remove('is-distant-leaving');
											slide.classList.add('is-distant');
										}
									});
								});
							},
						}
					});

					// âœ… ì´ˆê¸°ì—ë„ íë¦¼ ì ìš©ë˜ë„ë¡ íŠ¸ë¦¬ê±°
					setTimeout(() => {
						swiper.emit('slideChangeTransitionEnd');
					}, 10);
				}, []);

				return (
					<div className="w-full flex justify-center">
						<div className="swiper mySwiper max-w-[1000px] w-full overflow-hidden">
							<div className="swiper-wrapper">
								{pets.map((pet) => (
									<div className="swiper-slide w-[400px]" key={pet.id}>
										<PetCard pet={pet} />
									</div>
								))}
							</div>
						</div>
					</div>
				);
			}


			const root = ReactDOM.createRoot(document.getElementById("root"));
			root.render(<App />);
		</script>

</body>

</html>