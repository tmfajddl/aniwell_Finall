<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" th:href="@{/resource/css/main.css}">
	<link rel="stylesheet" th:href="@{/resource/css/dog-toggle.css}" />
	<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">

	<title>MAIN</title>
</head>

<body class="bg-gradient-to-b from-[#E4F0B9] to-[#FCDCA9]">
	<div class="section section-top mx-auto z-0">
		<img class="logo mx-auto" src="https://imgur.com/rcOcaL6.png" alt="d">
		<div class="bg-logo">
			<img class="b-logo mx-auto" src="https://imgur.com/qYhSSXR.png"  alt="aniwell_í°_ë¡œê³ ">
			<div class="char">
				<img class="img_head sway-top" src="/img/logo_head.PNG" alt="dog_cat">
				<img class="img_body w-full mx-auto absolute" src="/img/logo-body.png" alt="dog_cat">
			</div>
			<div class="scroll-indicator absolute w-full mx-auto z-10 mt-52">
				<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64"
					class="mx-auto animate-bounce-down">
					<circle cx="32" cy="32" r="30" stroke="#ffffffaa" stroke-width="2" fill="none" />
					<line x1="32" y1="20" x2="32" y2="40" stroke="#ffffff" stroke-width="3" stroke-linecap="round" />
					<polyline points="24,34 32,42 40,34" fill="none" stroke="#ffffff" stroke-width="3"
						stroke-linecap="round" stroke-linejoin="round" />
				</svg>
			</div>

			<div class="icon z-10">
				<!-- ë¡œê·¸ì¸ ë²„íŠ¼ -->
				<button type="button" class="" th:if="${!rq.isLogined}"
									onclick="setTimeout(() => { location.href='/usr/member/login'; }, 1000)">
					<div class="toggle dog-rollover">
						<input type="checkbox" id="doggo">
						<label for="doggo" class="toggle-item">
							<div class="dog">
								<div class="ear"></div>
								<div class="ear right"></div>
								<div class="face">
									<div class="eyes"></div>
									<div class="mouth"></div>
								</div>
							</div>
						</label>
					</div>
				</button>

				<div class="up-icon z-10">
					<button id="vetList" type="button" class="in-icon hidden">
						vetlist
						<img src="https://i.imgur.com/2ZJPrGR.png" alt="vetlist">
					</button>
					<button id="petlist" type="button" class="in-icon hidden">
						petlist
						<img src="https://i.imgur.com/2ZJPrGR.png" alt="petlist">
					</button>
				</div>
			</div>
		</div>

	</div>

	<!-- ì¤‘ê°„ ì„¹ì…˜ -->
	<div id="sectionMiddle" class="z-10 section-middle mx-auto transition-all duration-700">

		

		<!-- ğŸ¾ ì„¸ì…˜ 2 -->
		<section id="sec2" class="flex items-center min-h-[100dvh] md:min-h-screen w-full bg-gradient-to-b from-[#fff7e6] to-[#ffe4b3]">
			<!-- ğŸŒŠ íŒŒë„ ë°°ê²½ -->
					<div class="wave"></div>
			<div class="mx-auto grid md:grid-cols-2 items-center gap-6 md:gap-10 px-6 md:px-16 py-32">
				<!-- ì™¼ìª½: ë¬¸êµ¬ -->
				<div class="max-w-2xl" data-aos="fade-right">
					<h2 class="text-5xl font-extrabold text-[#2b2b2b] drop-shadow mb-4">
						ìš°ë¦¬ ì•„ì´ì˜ í•˜ë£¨,<br>ë°œìêµ­ê¹Œì§€ ê¸°ë¡í•©ë‹ˆë‹¤ ğŸ¾
					</h2>
					<p class="text-lg text-gray-700 leading-relaxed">
						ë°°ë³€ íšŸìˆ˜ì™€ ì›€ì§ì„ì„ ë¶„ì„í•´<br>ì–´ë””ì—ì„œ ì–¼ë§ˆë‚˜ ë¨¸ë¬¼ë €ëŠ”ì§€ ì•Œë ¤ë“œë ¤ìš”.
					</p>
				</div>

				<!-- ì˜¤ë¥¸ìª½: ì• ë‹ˆë©”ì´ì…˜ ìš”ì†Œ -->
				<div class="relative h-[40vh] md:h-[60vh] overflow-visible">
					<!-- ì›í•˜ëŠ” ì´ë¯¸ì§€/SVG/Lottieë¡œ êµì²´ ê°€ëŠ¥ -->
					<img src="/img/default-pet.png" alt="paw"
						class="right-anim absolute right-0 bottom-0 w-[55%] max-w-[420px]" />
				</div>
			</div>
		</section>

		<!-- ğŸ“¸ ì„¸ì…˜ 3 -->
		<!-- ì„¹ì…˜ 3 : í•€ ê³ ì • ì• ë‹ˆë©”ì´ì…˜ -->
		<section id="sec3" class="min-h-[100dvh] md:min-h-screen w-full bg-gradient-to-b from-[#e0f7fa] to-[#b2ebf2]">
			<div class="mx-auto grid md:grid-cols-2 items-center gap-6 md:gap-10 px-6 md:px-16 py-16">
				<!-- ì™¼ìª½: ë¬¸êµ¬ -->
				<div class="max-w-2xl">
					<h2 class="text-5xl font-extrabold text-cyan-900 drop-shadow mb-4">
						í•œ ì¥ì˜ ì‚¬ì§„ìœ¼ë¡œ ë§ˆìŒì„ ì½ì–´ìš” ğŸ’–
					</h2>
					<p class="text-lg text-gray-700 leading-relaxed">
						ë°˜ë ¤ë™ë¬¼ì˜ í‘œì •ê³¼ í–‰ë™ íŒ¨í„´ì„ ë¶„ì„í•´<br>í–‰ë³µ, ì¦ê±°ì›€, í”¼ê³¤í•¨ê¹Œì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.
					</p>
				</div>

				<!-- ì˜¤ë¥¸ìª½: ì—¬ëŸ¬ ë ˆì´ì–´ë¥¼ ìˆœì°¨ ì• ë‹ˆë©”ì´ì…˜ -->
				<div class="relative h-[45vh] md:h-[65vh]">
					<img src="/img/emo-cat.png" class="sec3-layer absolute right-0 bottom-0 w-[70%] max-w-[480px]" />
					<img src="/img/emo-cat.png" class="sec3-dog absolute right-[10%] bottom-[8%] w-[42%] opacity-0" />
					<img src="/img/emo-cat.png" class="sec3-heart absolute right-[40%] top-[10%] w-[12%] opacity-0" />
					<img src="/img/emo-cat.png" class="sec3-sparkle absolute right-[22%] top-[4%] w-[10%] opacity-0" />
				</div>
			</div>
		</section>


	</div>



	<!-- AOS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°-->
	<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
	<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
	<script>
		AOS.init();
	</script>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		if (![[${rq.isLogined}]]) {
			// ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ˆë¼ë©´ localStorage ì •ë¦¬
			localStorage.removeItem("loginedMember");
			localStorage.removeItem("selectedPetId");
		}
	</script>
	<!-- JS -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollToPlugin.min.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			AOS.init({once: true, duration: 600, easing: 'ease-out'});
		});
	</script>
	<script>

		const isLogined = localStorage.getItem("loginedMember") !== null;

		if (!isLogined) {
			localStorage.removeItem("loginedMember");
			localStorage.removeItem("selectedPetId");
			return;
		}

		document.getElementById("loginButton").classList.add("hidden");
		if (!memberId) return;

		$.get("/api/member/getUsrInfo", {memberId})
			.done(function (data) {
				const authLevel = data.authLevel;
				if (authLevel === 3) {
					$("#vetList").removeClass("hidden").on("click", () => {
						location.href = "/usr/vetAnswer/vetList";
					});
				} else {
					$("#petlist").removeClass("hidden").on("click", () => {
						location.href = `/usr/pet/list?memberId=${memberId}`;
					});
				}
			})
			.fail((err) => console.error("getUsrInfo ì‹¤íŒ¨", err));

		// ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ
		document.getElementById("loginButton").addEventListener("click", () => {
			setTimeout(() => {
				location.href = "/usr/member/login";
			}, 1000);
		});
	</script>

	<script>
		gsap.registerPlugin(ScrollTrigger);

		// section-topì˜ í•˜ë‹¨ì´ ë·°í¬íŠ¸ í•˜ë‹¨ì— ë‹¿ëŠ” ì§€ì ë¶€í„° 200px ìŠ¤í¬ë¡¤ êµ¬ê°„ ë™ì•ˆ
		// #sectionMiddleì˜ margin-topì„ 0 -> -80pxë¡œ ë³´ê°„
		gsap.to("#sectionMiddle", {
			marginTop: -80,
			ease: "none",
			scrollTrigger: {
				trigger: ".section-top",
				start: "bottom bottom", // section-topì˜ bottomì´ ë·°í¬íŠ¸ bottomê³¼ ë§Œë‚  ë•Œ ì‹œì‘
				end: "+=200",           // 200px ìŠ¤í¬ë¡¤ ë™ì•ˆ ë³€í™” (ì²´ê°ì— ë§ê²Œ 120~300 ì‚¬ì´ë¡œ ì¡°ì ˆ)
				scrub: true             // ìŠ¤í¬ë¡¤ ì—°ë™
				// markers: true         // ë””ë²„ê·¸ìš©
			}
		});

		// ì¤‘ê°„ ì„¹ì…˜ ì•ˆ ìš”ì†Œë“¤ í˜ì´ë“œì—…(ì˜µì…˜)
		gsap.utils.toArray('#sectionMiddle .animate-content').forEach((el, i) => {
			gsap.fromTo(el,
				{opacity: 0, y: 24},
				{
					opacity: 1, y: 0, duration: 0.6, delay: i * 0.08,
					scrollTrigger: {trigger: el, start: "top 80%"}
				}
			);
		});
	</script>

	<script>


		// ì˜¤ë¥¸ìª½ íŒ¨ëŸ´ë™ìŠ¤ (ì„¸ì…˜2)
		gsap.fromTo(".right-anim",
			{y: 80, opacity: 0, rotate: -4, scale: 0.96},
			{
				y: -40, opacity: 1, rotate: 0, scale: 1,
				ease: "power2.out",
				scrollTrigger: {
					pinSpacing: true, 
					trigger: "#sec2",             // âœ… ì„¹ì…˜ ìì²´ë¥¼ íŠ¸ë¦¬ê±°
					start: "top bottom",          // ì„¹ì…˜ topì´ ë·°í¬íŠ¸ bottomì— ë‹¿ì„ ë•Œ ì‹œì‘
					end: "bottom top",            // ì„¹ì…˜ bottomì´ ë·°í¬íŠ¸ topì— ë‹¿ì„ ë•Œ ë
					scrub: true
				}
			}
		);


		const tl3 = gsap.timeline({
		  scrollTrigger: {
		    trigger: "#sec3",                // ì„¸ì…˜ ë£¨íŠ¸
		    start: "top  top",                // ì„¸ì…˜ ì‹œì‘ê³¼ ë™ì‹œì—
		    end: () => "+=" + window.innerHeight * 2, // 2ë·°í¬íŠ¸ ê¸¸ì´ ë§Œí¼ ì§„í–‰
		    scrub: true,
		    pin: true,             // âœ… ìì‹ë§Œ ê³ ì •
		    pinSpacing: true,               // âœ… pinSpacer ìƒì„± ì•ˆ í•¨ (ë¶€ëª¨ ë ˆì´ì•„ì›ƒ ì•ˆ í”ë“¤ë¦¼)
		    anticipatePin: 1,
		    invalidateOnRefresh: true,
		    markers: true,
			id: "sec3", 
		  }
		});
		tl3.fromTo(".sec3-layer",
			{y: 40, scale: 0.92, rotate: -2, opacity: 0},
			{y: 0, scale: 1, rotate: 0, opacity: 1, duration: 0.35, ease: "power2.out"}
		).to(".sec3-dog", {opacity: 1, y: -10, duration: 0.25, ease: "power2.out"}, ">-0.05")
			.to(".sec3-heart", {opacity: 1, y: -20, scale: 1.1, duration: 0.2, ease: "back.out(2)"}, "+=0.05")
			.to(".sec3-sparkle", {opacity: 1, y: -16, scale: 1.08, duration: 0.2, ease: "back.out(2)"}, "<0.05")
			.to([".sec3-layer", ".sec3-dog", ".sec3-heart", ".sec3-sparkle"],
				{y: -30, duration: 0.4, ease: "none"});

	</script>



	<script>

		let memberId = null;
		function ee() {
			$.ajax({
				type: "GET",
				url: `/api/member/myPage`,
				success: function (data) {
					console.log(data.id);
					memberId = data.id;
					localStorage.setItem("loginedMember", memberId);
					e();
				},
				error: function (err) {
					console.error("ê°€ì ¸ì˜¤ê¸°ì‹¤íŒ¨", err);
				}
			});
		}
		let authLevel = null;
		function e() {
			$.ajax({
				type: "GET",
				url: `/api/member/getUsrInfo`,
				data: {memberId: memberId},
				success: function (data) {
					authLevel = data.authLevel;
					if (authLevel === 3) {
						// ìˆ˜ì˜ì‚¬ ë²„íŠ¼ë§Œ ë³´ì—¬ì£¼ê¸°
						$("#vetList").removeClass("hidden").on("click", function () {
							location.href = "/usr/vetAnswer/vetList";
						});
					} else {
						// ì¼ë°˜ ì‚¬ìš©ì ë²„íŠ¼ë§Œ ë³´ì—¬ì£¼ê¸°
						$("#petlist").removeClass("hidden").on("click", function () {
							location.href = `/usr/pet/list?memberId=${memberId}`;
						});
					}
				},
				error: function (err) {
					console.error("getUsrInfo ì‹¤íŒ¨", err);
				}
			});
		}

		ee();
	</script>


</body>

</html>